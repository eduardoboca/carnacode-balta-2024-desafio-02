@page "/history"

@using Imc.Models
@using Imc.Repositories

@inject ILocalStorageService LocalStorage

<div class="logo-container">
    <img src="assets/icon-no-bg.png" alt="logo" class="logo">
</div>
<header class="PageHeader">
    <span>Histórico</span>
</header>
<main>
    <div class="content">
        <input type="text" class="search" placeholder="Pesquisar...">
        <section class="section-history">
            <table class="tableHistory">
                @foreach(var imcResult in _history)
                {
                    <tr class="rowHistory">
                        <td>
                            <div class="icon-cell"></div>
                        </td>
                        <td class="table-data">
                            <div class="textTitle">@imcResult.ImcValue </div>
                            <div class="textDate">@imcResult.MeasureDate</div>
                            <div class="textDescription ">@imcResult.Status</div>
                        </td>
                    </tr>
                }
            </table>
        </section>
    </div>
</main>

@code {
    private List<ImcResult> _history = new();

    protected override void OnInitialized()
    {
        var imcResultRepository = new ImcResultRepository(LocalStorage);

        _history = imcResultRepository.Get();
    }
}
